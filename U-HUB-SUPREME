-- [[ UNX BYPASS : NO KEY SYSTEM VERSION ]]
-- Developed for: "one" (Nong Nueng)

local Fluent = loadstring(game:HttpGet("https://github.com/dawid-scripts/Fluent/releases/latest/download/main.lua"))()
local SaveManager = loadstring(game:HttpGet("https://raw.githubusercontent.com/dawid-scripts/Fluent/master/Addons/SaveManager.lua"))()
local InterfaceManager = loadstring(game:HttpGet("https://raw.githubusercontent.com/dawid-scripts/Fluent/master/Addons/InterfaceManager.lua"))()

-- [[ Configuration Setting ]]
_G.Settings = {
    AutoStart = false,
    AutoNext = false,
    AutoUpgrade = false,
    AutoSkill = false,
    Speed = 1
}

local Window = Fluent:CreateWindow({
    Title = "U-HUB : Anime Vanguards (PRO)",
    SubTitle = "by One",
    TabWidth = 160,
    Size = UDim2.fromOffset(580, 460),
    Acrylic = true,
    Theme = "Dark",
    MinimizeKey = Enum.KeyCode.LeftControl
})

-- [[ Tabs Setup ]]
local Tabs = {
    Main = Window:AddTab({ Title = "Main Farm", Icon = "home" }),
    Settings = Window:AddTab({ Title = "Settings", Icon = "settings" })
}

local Notify = Fluent:MakeNotification({
    Title = "U-HUB Loaded",
    Content = "ยินดีต้อนรับครับหนึ่ง! ระบบพร้อมทำงานแบบไม่ต้องใช้คีย์แล้ว",
    Duration = 5
})

-- [[ Main Farm Section ]]
Tabs.Main:AddParagraph({
    Title = "Auto Farm Functions",
    Content = "จัดการระบบฟาร์มของ Anime Vanguards ได้ที่นี่"
})

local ToggleStart = Tabs.Main:AddToggle("AutoStart", {Title = "Auto Start Game", Default = false })
ToggleStart:OnChanged(function()
    _G.Settings.AutoStart = ToggleStart.Value
end)

local ToggleNext = Tabs.Main:AddToggle("AutoNext", {Title = "Auto Next Level", Default = false })
ToggleNext:OnChanged(function()
    _G.Settings.AutoNext = ToggleNext.Value
end)

local ToggleUpgrade = Tabs.Main:AddToggle("AutoUpgrade", {Title = "Auto Upgrade Units", Default = false })
ToggleUpgrade:OnChanged(function()
    _G.Settings.AutoUpgrade = ToggleUpgrade.Value
end)

local ToggleSkill = Tabs.Main:AddToggle("AutoSkill", {Title = "Auto Use Skills", Default = false })
ToggleSkill:OnChanged(function()
    _G.Settings.AutoSkill = ToggleSkill.Value
end)

Tabs.Main:AddSlider("AttackSpeed", {
    Title = "Execution Speed",
    Description = "ปรับความเร็วการส่งคำสั่ง (แนะนำ 1)",
    Default = 1,
    Min = 0.1,
    Max = 5,
    Rounding = 1,
    Callback = function(Value)
        _G.Settings.Speed = Value
    end
})

-- [[ Logic Engine : แกะระบบจาก UNX ]]
local RS = game:GetService("ReplicatedStorage")
local Players = game:GetService("Players").LocalPlayer

local function Request(Category, Action, Data)
    pcall(function()
        local Endpoint = RS:FindFirstChild("Endpoints"):FindFirstChild(Category .. "Endpoint")
        if Endpoint then
            if Endpoint:IsA("RemoteFunction") then
                Endpoint:InvokeServer(Action, Data)
            else
                Endpoint:FireServer(Action, Data)
            end
        end
    end)
end

-- ระบบ Loop มหาประลัย (ทำงานเบื้องหลังตลอดเวลา)
task.spawn(function()
    while true do
        task.wait(_G.Settings.Speed)
        
        -- ระบบ Auto Upgrade & Skill
        pcall(function()
            if _G.Settings.AutoUpgrade or _G.Settings.AutoSkill then
                for _, unit in pairs(workspace.Units:GetChildren()) do
                    if unit:FindFirstChild("Owner") and unit.Owner.Value == Players.Name then
                        if _G.Settings.AutoUpgrade then
                            Request("Unit", "Upgrade", unit)
                        end
                        if _G.Settings.AutoSkill then
                            Request("Unit", "UseSkill", unit)
                        end
                    end
                end
            end
        end)

        -- ระบบ Auto Start / Next
        if _G.Settings.AutoStart or _G.Settings.AutoNext then
            Request("Lobby", "NextLevel", nil)
            Request("Play", "StartGame", nil)
        end
    end
end)

-- [[ Footer & Interface Manager ]]
SaveManager:SetLibrary(Fluent)
InterfaceManager:SetLibrary(Fluent)
SaveManager:IgnoreThemeSettings()
SaveManager:SetIgnoreIndexes({})
InterfaceManager:BuildInterfaceSection(Tabs.Settings)
SaveManager:BuildConfigSection(Tabs.Settings)

Window:SelectTab(1)
Fluent:Notify({
    Title = "Bypass Success",
    Content = "Key System has been removed for One.",
    Duration = 5
})
